<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>近代物理实验 II – 资料与报告</title>
  <link rel="stylesheet" href="../../styles.css">
  <style>
    /* ===== 局部微调 ===== */
    .block { margin: 40px 0; }
    .file-list {
      display: grid;
      gap: 15px;
      margin-top: 20px;
    }
    .file-card {
      background: #fff;
      padding: 15px 20px;
      border-left: 4px solid #0066cc;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,.08);
    }
    .file-card h3 { margin: 0 0 8px; font-size: 1.15em; }
    .file-card a { color: #0066cc; text-decoration: none; }
    .file-card a:hover { text-decoration: underline; }
    .size { color: #666; font-size: .9em; }
    .empty { color: #999; }
  </style>
</head>

<body>
  <header>
    <div class="container">
      <h1>近代物理实验 II</h1>
      <p class="subtitle">参考资料 & 实验报告</p>
    </div>
  </header>

  <div class="container">
    <div class="content">

      <!-- ===== 参考资料 ===== -->
      <section class="block">
        <h2>📎 参考资料</h2>
        <p>点击文件名即可在线浏览或下载。</p>
        <div id="pdfList" class="file-list">加载中…</div>
      </section>

      <!-- ===== 实验报告 ===== -->
      <section class="block">
        <h2>📝 实验报告</h2>
        <p>小组实验报告（PDF）。</p>
        <div id="reportList" class="file-list">加载中…</div>
      </section>

    </div>
  </div>

  <footer>
    <div class="container">
      <p>&copy; 2025 117-119 实验室 版权所有</p>
    </div>
  </footer>

  <script>
    /* ---------- 通用渲染函数 ---------- */
    const render = (url, boxId, urlPrefix = '') =>
      fetch(url)
        .then(r => r.json())
        .then(list => {
          const box = document.getElementById(boxId);
          if (!list.length) { box.innerHTML = '<p class="empty">暂无文件</p>'; return; }
          box.innerHTML = list.map(f => `
            <div class="file-card">
              <h3><a href="${urlPrefix}${f.url}" target="_blank">${f.name}</a></h3>
              <span class="size">${(f.size/1024).toFixed(1)} KB</span>
            </div>`).join('');
        })
        .catch(err => document.getElementById(boxId).innerHTML = `<p class="empty" style="color:red">${err.message}</p>`);

    /* ---------- 加载两份列表 ---------- */
    render('./Reference/files.json', 'pdfList', 'Reference/');   // 参考资料
    render('./Reports/reports.json', 'reportList', 'Reports/'); // 实验报告
  </script>
</body>
</html>